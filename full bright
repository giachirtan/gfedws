local function extremeGraphicsReduction()
    local lighting = game:GetService("Lighting")
    local terrain = workspace:FindFirstChildOfClass("Terrain")

    -- Bảo vệ script với pcall để tránh crash
    pcall(function()
        -- Tối ưu hóa Lighting đến mức tối thiểu
        lighting.GlobalShadows = false -- Tắt bóng toàn cục
        lighting.ShadowSoftness = 0
        lighting.Technology = Enum.Technology.Compatibility -- Chế độ đồ họa cơ bản
        lighting.Brightness = 0.5 -- Độ sáng tối thiểu
        lighting.FogEnd = 25 -- Giảm tầm nhìn sương mù cực thấp
        lighting.FogStart = 0
        lighting.Ambient = Color3.new(0, 0, 0) -- Tắt ánh sáng môi trường
        lighting.OutdoorAmbient = Color3.new(0, 0, 0) -- Tắt ánh sáng ngoài trời

        -- Tắt toàn bộ hiệu ứng PostEffect
        for _, effect in pairs(lighting:GetChildren()) do
            if effect:IsA("PostEffect") then
                effect.Enabled = false
            end
        end

        -- Tối ưu hóa Terrain
        if terrain then
            terrain.WaterWaveSize = 0 -- Tắt sóng nước
            terrain.WaterWaveSpeed = 0 -- Tắt chuyển động nước
            terrain.WaterReflectance = 0 -- Tắt phản chiếu nước
            terrain.WaterTransparency = 1 -- Làm nước hoàn toàn trong suốt
        end

        -- Tối ưu hóa các đối tượng trong Workspace
        for _, obj in pairs(workspace:GetDescendants()) do
            if obj:IsA("BasePart") then
                obj.CastShadow = false -- Tắt bóng từng đối tượng
                obj.Material = Enum.Material.Plastic -- Vật liệu nhẹ nhất
                obj.Reflectance = 0 -- Tắt phản chiếu
                obj.Transparency = 0.8 -- Làm mờ các đối tượng để giảm tải (giữ 0.2 để tránh lỗi)
            elseif obj:IsA("ParticleEmitter") or obj:IsA("Trail") or obj:IsA("Beam") or obj:IsA("Smoke") then
                obj.Enabled = false -- Tắt toàn bộ hiệu ứng hạt và chuyển động
            end
        end

        -- Giảm chất lượng render xuống mức thấp nhất
        settings().Rendering.QualityLevel = Enum.QualityLevel.Level01 -- Chất lượng cực thấp
        settings().Rendering.EnableFRM = false -- Tắt Full Resolution Mode
        settings().Rendering.EnableFullShadowMap = false -- Tắt bản đồ bóng chi tiết

        -- Tắt hiệu ứng môi trường khác
        workspace.Gravity = 0 -- Giảm tải tính toán vật lý (có thể ảnh hưởng nhỏ đến gameplay)
    end)

    print("[Grok 3 - xAI] Extreme graphics reduction applied! Game optimized for long-term AFK.")
end

-- Chạy script và xử lý lỗi
local success, error = pcall(function()
    extremeGraphicsReduction()
end)

if not success then
    warn("[Grok 3 - xAI] Error during optimization: " .. error)
else
    print("[Grok 3 - xAI] Optimization complete. Ready to AFK with minimal resource usage.")
end
